<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Check On! Challenge Simulator</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background: #1a1a2e;
            color: white;
            font-size: 12px;
        }
        
        .timer-display {
            font-size: 3em;
            font-weight: bold;
            text-align: center;
            margin: 0;
            padding: 10px 0;
            color: #4ecdc4;
            background: rgba(0,0,0,0.3);
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            margin: 0;
            padding: 5px;
            gap: 2px;
        }
        
        .btn {
            padding: 8px 12px;
            font-size: 0.8em;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            flex: 1;
        }
        
        .btn-start {
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
            color: white;
        }
        
        .btn-start:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }
        
        .btn-stop {
            background: linear-gradient(45deg, #45b7d1, #96ceb4);
            color: white;
        }
        
        .btn-stop:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(69, 183, 209, 0.4);
        }
        
        .btn-reset {
            background: linear-gradient(45deg, #6c5ce7, #a29bfe);
            color: white;
        }
        
        .btn-reset:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(108, 92, 231, 0.4);
        }
        
        .btn-next {
            background: linear-gradient(45deg, #ffeaa7, #fdcb6e);
            color: #2d3436;
        }
        
        .btn-next:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(253, 203, 110, 0.4);
        }
        
        .docket-container {
            display: flex;
            margin: 0;
            padding: 5px;
            gap: 2px;
        }
        
        .docket {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            padding: 8px;
            flex: 1;
            border: 1px solid rgba(255, 255, 255, 0.2);
            opacity: 0.3;
            transition: opacity 0.3s ease;
        }
        
        .docket.active {
            opacity: 1;
            background: rgba(255, 107, 107, 0.2);
        }
        
        .docket h3 {
            color: #ff6b6b;
            margin: 0 0 4px 0;
            font-size: 0.9em;
        }
        
        .docket-time {
            font-size: 0.7em;
            color: #4ecdc4;
            margin-bottom: 6px;
            font-weight: bold;
        }
        
        .cocktail-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .cocktail-list li {
            padding: 2px 0;
            font-size: 0.75em;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .cocktail-list li:last-child {
            border-bottom: none;
        }
        
        .status {
            text-align: center;
            font-size: 0.8em;
            margin: 0;
            padding: 5px;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .status.waiting {
            color: #4ecdc4;
        }
        
        .status.running {
            color: #ff6b6b;
            animation: pulse 2s infinite;
        }
        
        .status.finished {
            color: #96ceb4;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        .results {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            padding: 8px;
            margin: 5px;
            display: none;
            font-size: 0.8em;
        }
        
        .results.show {
            display: block;
        }
        
        .setup-info {
            background: rgba(78, 205, 196, 0.1);
            border-radius: 4px;
            padding: 5px;
            margin: 5px;
            border-left: 3px solid #4ecdc4;
            font-size: 0.7em;
        }
        
        @media (max-width: 768px) {
            .timer-display {
                font-size: 2.5em;
            }
            
            .controls {
                flex-wrap: wrap;
            }
            
            .btn {
                font-size: 0.7em;
                padding: 6px 8px;
            }
            
            .docket-container {
                flex-direction: column;
            }
            
            .cocktail-list li {
                font-size: 0.8em;
            }
        }
    </style>
</head>
<body>
    <div class="timer-display" id="timer">00:00</div>
    
    <div class="controls">
        <button class="btn btn-start" id="startBtn" onclick="startChallenge()">START</button>
        <button class="btn btn-stop" id="stopBtn" onclick="stopChallenge()" disabled>STOP</button>
        <button class="btn btn-reset" id="resetBtn" onclick="resetChallenge()">RESET</button>
        <button class="btn btn-next" id="nextBtn" onclick="skipToNextDocket()" disabled>NEXT</button>
    </div>
    
    <div class="docket-container" id="docketContainer">
        <div class="docket" id="docket1">
            <h3>DOCKET 1</h3>
            <div class="docket-time">0:00</div>
            <ul class="cocktail-list" id="docket1-list"></ul>
        </div>
        
        <div class="docket" id="docket2">
            <h3>DOCKET 2</h3>
            <div class="docket-time">2:00</div>
            <ul class="cocktail-list" id="docket2-list"></ul>
        </div>
        
        <div class="docket" id="docket3">
            <h3>DOCKET 3</h3>
            <div class="docket-time">4:00</div>
            <ul class="cocktail-list" id="docket3-list"></ul>
        </div>
    </div>
    
    <div class="status" id="status">Ready to begin</div>
    
    <div class="setup-info">
        <strong>Setup:</strong> 5min | <strong>Challenge:</strong> 6min | <strong>Dockets:</strong> 0:00, 2:00, 4:00
    </div>
    
    <div class="results" id="results">
        <h3>Results</h3>
        <div id="resultsContent"></div>
    </div>

    <script>
        const cocktails = [
            "Airmail", "Batanga", "Blood & Sand", "Bobby Burns", "Chi Chi",
            "Corpse Reviver No. 2", "Cosmopolitan", "El Diablo", "Espresso Martini",
            "French 75", "Gin Basil Smash", "Jasmine", "Jungle Bird", "Last Word",
            "London Calling", "Old Cuban", "Painkiller", "Paloma", "Rattlesnake",
            "Revolver", "Rob Roy", "Russian Spring Punch", "Sea Breeze", "Southside",
            "Tommy's Margarita", "Toreador", "Vesper Martini", "Whiskey Sour"
        ];
        
        let timer = null;
        let startTime = null;
        let elapsedTime = 0;
        let isRunning = false;
        let currentDockets = [];
        let docketPattern = [];
        let nextDocketIndex = 1; // Track which docket to issue next
        
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }
        
        function generateDockets() {
            // Only use 3-3-3 pattern for consistency
            docketPattern = [3, 3, 3];
            
            const shuffledCocktails = shuffleArray(cocktails);
            currentDockets = [];
            
            let cocktailIndex = 0;
            for (let i = 0; i < 3; i++) {
                const docketSize = docketPattern[i];
                const docket = [];
                for (let j = 0; j < docketSize; j++) {
                    docket.push(shuffledCocktails[cocktailIndex]);
                    cocktailIndex++;
                }
                currentDockets.push(docket);
            }
        }
        
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }
        
        function updateTimer() {
            if (isRunning) {
                elapsedTime = Math.floor((Date.now() - startTime) / 1000);
                document.getElementById('timer').textContent = formatTime(elapsedTime);
                
                // Issue dockets at appropriate times
                if (elapsedTime === 0 && nextDocketIndex === 1) {
                    issueDocket(1);
                    nextDocketIndex = 2;
                } else if (elapsedTime === 120 && nextDocketIndex === 2) { // 2:00
                    issueDocket(2);
                    nextDocketIndex = 3;
                } else if (elapsedTime === 240 && nextDocketIndex === 3) { // 4:00
                    issueDocket(3);
                    nextDocketIndex = 4;
                } else if (elapsedTime >= 360) { // 6:00 - time's up!
                    stopChallenge();
                    return;
                }
                
                timer = setTimeout(updateTimer, 100);
            }
        }
        
        function issueDocket(docketNumber) {
            const docket = document.getElementById(`docket${docketNumber}`);
            const list = document.getElementById(`docket${docketNumber}-list`);
            
            // Clear existing items
            list.innerHTML = '';
            
            // Add cocktails to the docket
            currentDockets[docketNumber - 1].forEach(cocktail => {
                const li = document.createElement('li');
                li.textContent = cocktail;
                list.appendChild(li);
            });
            
            // Activate the docket
            docket.classList.add('active');
            
            // Update status
            const status = document.getElementById('status');
            status.textContent = `DOCKET ${docketNumber} ISSUED! (${currentDockets[docketNumber - 1].length} drinks)`;
            status.className = 'status running';
        }
        
        function startChallenge() {
            generateDockets();
            
            startTime = Date.now();
            isRunning = true;
            elapsedTime = 0;
            nextDocketIndex = 1;
            
            document.getElementById('startBtn').disabled = true;
            document.getElementById('stopBtn').disabled = false;
            document.getElementById('resetBtn').disabled = true;
            document.getElementById('nextBtn').disabled = false;
            
            // Reset dockets
            for (let i = 1; i <= 3; i++) {
                document.getElementById(`docket${i}`).classList.remove('active');
                document.getElementById(`docket${i}-list`).innerHTML = '';
            }
            
            // Hide results
            document.getElementById('results').classList.remove('show');
            
            const status = document.getElementById('status');
            status.textContent = 'Challenge in progress... First docket coming up!';
            status.className = 'status running';
            
            updateTimer();
        }
        
        function skipToNextDocket() {
            if (isRunning && nextDocketIndex <= 3) {
                issueDocket(nextDocketIndex);
                nextDocketIndex++;
                
                // Update button state
                if (nextDocketIndex > 3) {
                    document.getElementById('nextBtn').disabled = true;
                }
            }
        }
        
        function stopChallenge() {
            isRunning = false;
            if (timer) {
                clearTimeout(timer);
            }
            
            document.getElementById('startBtn').disabled = false;
            document.getElementById('stopBtn').disabled = true;
            document.getElementById('resetBtn').disabled = false;
            document.getElementById('nextBtn').disabled = true;
            
            const status = document.getElementById('status');
            status.textContent = 'Challenge stopped! Review your performance below.';
            status.className = 'status finished';
            
            showResults();
        }
        
        function resetChallenge() {
            isRunning = false;
            if (timer) {
                clearTimeout(timer);
            }
            
            elapsedTime = 0;
            nextDocketIndex = 1;
            document.getElementById('timer').textContent = '00:00';
            
            document.getElementById('startBtn').disabled = false;
            document.getElementById('stopBtn').disabled = true;
            document.getElementById('resetBtn').disabled = false;
            document.getElementById('nextBtn').disabled = true;
            
            // Reset dockets
            for (let i = 1; i <= 3; i++) {
                document.getElementById(`docket${i}`).classList.remove('active');
                document.getElementById(`docket${i}-list`).innerHTML = '';
            }
            
            // Hide results
            document.getElementById('results').classList.remove('show');
            
            const status = document.getElementById('status');
            status.textContent = 'Ready to begin your Check On challenge!';
            status.className = 'status waiting';
        }
        
        function showResults() {
            const totalDrinks = currentDockets.reduce((sum, docket) => sum + docket.length, 0);
            const pattern = docketPattern.join('-');
            
            let resultsHTML = `
                <p><strong>Challenge Pattern:</strong> ${pattern} (${totalDrinks} total drinks)</p>
                <p><strong>Time Completed:</strong> ${formatTime(elapsedTime)} / 6:00</p>
                <p><strong>Performance:</strong> ${elapsedTime <= 360 ? 'Completed on time!' : 'Overtime - penalty points apply'}</p>
                <h4>Your Dockets:</h4>
            `;
            
            for (let i = 0; i < currentDockets.length; i++) {
                resultsHTML += `
                    <p><strong>Docket ${i + 1} (${currentDockets[i].length} drinks):</strong><br>
                    ${currentDockets[i].join(', ')}</p>
                `;
            }
            
            if (elapsedTime > 360) {
                const overtime = elapsedTime - 360;
                resultsHTML += `<p style="color: #ff6b6b;"><strong>Overtime Penalty:</strong> -${overtime * 10} points (${overtime} seconds × 10 points/second)</p>`;
            }
            
            document.getElementById('resultsContent').innerHTML = resultsHTML;
            document.getElementById('results').classList.add('show');
        }
    </script>
</body>
</html>
